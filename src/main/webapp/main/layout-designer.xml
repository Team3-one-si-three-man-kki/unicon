<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
            <w2:dataCollection baseNode="map"/>
            <w2:workflowCollection/>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>
        <script lazy="false" type="text/javascript"><![CDATA[scwin.onpageload = function() {

};

// ë“œë˜ê·¸ ìƒíƒœ ë³€ìˆ˜ë“¤
var isDragging = false;
var draggedModuleId = null;

// ë§ˆìš°ìŠ¤ ë‹¤ìš´ - ë“œë˜ê·¸ ì‹œì‘
scwin.module_mouseDown = function(e, comp) {
    isDragging = true;
    draggedModuleId = this.id || "mf_grp_chatModule";
    
    console.log("ë“œë˜ê·¸ ì‹œì‘:", draggedModuleId);
    
    // ê¸°ë³¸ ì„ íƒ ë™ì‘ ë°©ì§€ (ì˜ì—­ ë“œë˜ê·¸ ì¡íˆëŠ”ê±° ë°©ì§€)
    if (e.preventDefault) e.preventDefault();
    if (e.stopPropagation) e.stopPropagation();
    
    // ì „ì²´ ë¬¸ì„œì—ì„œ í…ìŠ¤íŠ¸ ì„ íƒ ë°©ì§€
    document.body.style.userSelect = 'none';
    document.body.style.webkitUserSelect = 'none';
    document.body.style.mozUserSelect = 'none';
    document.body.style.msUserSelect = 'none';
    
    // ë“œë˜ê·¸ ì¤‘ ì»¤ì„œ ë³€ê²½
    document.body.style.cursor = 'grabbing';
    
    // ì „ì²´ ë¬¸ì„œì— ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ ì¶”ê°€
    document.addEventListener('mousemove', scwin.global_mouseMove);
    document.addEventListener('mouseup', scwin.global_mouseUp);
    
    return false; // ê¸°ë³¸ ë™ì‘ ì°¨ë‹¨
};

// ì „ì²´ í™”ë©´ì—ì„œ ë§ˆìš°ìŠ¤ ë¬´ë¸Œ
scwin.global_mouseMove = function(e) {
    if (!isDragging) return;
    
    console.log("ì „ì²´ ë“œë˜ê·¸ ì¤‘.. -> ìœ„ì¹˜:", e.clientX, e.clientY);
    
    // **************ì—¬ê¸°ì— ë“œë˜ê·¸ ì¤‘ì¸ ì‹œê°ì  ìš”ì†Œ ì¶”ê°€ í•´ì•¼í•¨********
    // ë§ˆìš°ìŠ¤ ì»¤ì„œ ë”°ë¼ë‹¤ë‹ˆëŠ” ëª¨ë“ˆ ë¯¸ë¦¬ë³´ê¸°
};

// ì „ì²´ í™”ë©´ì—ì„œ ë§ˆìš°ìŠ¤ ì—…
scwin.global_mouseUp = function(e) {
    if (!isDragging) return;
    
    console.log("ì „ì²´ ë“œë˜ê·¸ ì¢…ë£Œ:", e.clientX, e.clientY);
    
    // ë“œë¡­ ì˜ì—­ ì²´í¬
    scwin.checkDropZone(e.clientX, e.clientY);
    
    // ë“œë˜ê·¸ ìƒíƒœ ì´ˆê¸°í™”
    isDragging = false;
    draggedModuleId = null;
    
    // í…ìŠ¤íŠ¸ ì„ íƒ ì œí•œ í•´ì œ
    document.body.style.userSelect = '';
    //document.body.style.webkitUserSelect = '';
    document.body.style.mozUserSelect = '';
    document.body.style.msUserSelect = '';
    
    // ì›ë˜ ê¸°ë³¸ ì»¤ì„œë¡œ ë³µì›
    document.body.style.cursor = 'default';
    
    // ì „ì²´ ë¬¸ì„œ ì´ë²¤íŠ¸ ì œê±°
    document.removeEventListener('mousemove', scwin.global_mouseMove);
    document.removeEventListener('mouseup', scwin.global_mouseUp);
};

// ì˜ì—­ì— ëª¨ë“ˆ ì •ë³´ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
scwin.displayModuleInArea = function(zoneId, moduleId){
    // ì˜ì—­ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    var areaComponent = $p.getComponentById(zoneId);
    if(!areaComponent){
        console.log("ì˜ì—­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ", zoneId);
        return;
    }

    // ëª¨ë“ˆ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    var moduleInfo = scwin.getModuleData(moduleId);
    console.log("ë°°ì¹˜í•˜ëŠ” ëª¨ë“ˆ ì •ë³´:", moduleInfo);

    // ë“œë¡­í•œ ì˜ì—­ì„ ëª¨ë“ˆì˜ ë‚´ìš©ìœ¼ë¡œ ë³€ê²½
    var areaElement = document.getElementById(zoneId);
    if(areaElement){
        // ìŠ¤íƒ€ì¼ ë³€ê²½
        areaElement.style.border = "2px solid #4CAF50";
        areaElement.style.background = "#f0f8f0";

        // ë¼ë²¨ ê°’ ë³€ê²½
        var labelElement = areaElement.querySelector('span');
        if(labelElement){
            labelElement.innerHTML = moduleInfo.icon + " " +moduleInfo.name;
        }
    }
};

// ëª¨ë“ˆ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜ -> ë‚˜ì¤‘ì— ë™ì ìœ¼ë¡œ ëª¨ë“ˆ ë°ì´í„° ë°›ì•„ì˜¤ê¸°
// ì•„ì´ì½˜ì„ ì§ì ‘ ë„£ì§€ë§ê³  ìœ ë‹ˆì½”ë“œë¡œ ë„£ê¸°!
scwin.getModuleData = function(moduleId) {
    var moduleData = {
        "mf_grp_chatModule": {
            icon: "\uD83D\uDCAC",
            name: "ì±„íŒ…", 
            desc: "ì‹¤ì‹œê°„ ë©”ì‹œì§•"
        },
        "mf_grp_videoModule": {
            icon: "\uD83D\uDCF9",
            name: "í™”ìƒíšŒì˜",
            desc: "WebRTC ì˜ìƒí†µí™”"
        }
    };
    
    return moduleData[moduleId] || {icon: "", name: "ì•Œ ìˆ˜ ì—†ìŒ", desc: "ëª¨ë“ˆ ì •ë³´ ì—†ìŒ"};
};

// ë“œë¡­ ì²˜ë¦¬ í•¨ìˆ˜
scwin.handleDrop = function(zoneId) {
    console.log("ë“œë¡­ ì²˜ë¦¬ ì‹œì‘ - ì˜ì—­:", zoneId, "ëª¨ë“ˆ:", draggedModuleId);
    
    // ì˜ì—­ë³„ë¡œ ì²˜ë¦¬ - mf_ ì ‘ë‘ì‚¬ ì¶”ê°€  ---> ë””ë²„ê·¸ ë¡œê·¸ì´ë¯€ë¡œ ë‚˜ì¤‘ì— ë¹¼ê±°ë‚˜ ëª¨ë‹¬ê°™ì€ê±¸ë¡œ ë³€ê²½.
    switch (zoneId) {
        case "mf_grp_area1":
            alert("ì˜ì—­ 1ì— " + draggedModuleId + " ëª¨ë“ˆì´ ë°°ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤!");
            break;
        case "mf_grp_area2":
            alert("ì˜ì—­ 2ì— " + draggedModuleId + " ëª¨ë“ˆì´ ë°°ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤!");
            break;
        case "mf_grp_area3":
            alert("ì˜ì—­ 3ì— " + draggedModuleId + " ëª¨ë“ˆì´ ë°°ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤!");
            break;
        case "mf_grp_area4":
            alert("ì˜ì—­ 4ì— " + draggedModuleId + " ëª¨ë“ˆì´ ë°°ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤!");
            break;
        default:
            console.log("ì•Œ ìˆ˜ ì—†ëŠ” ì˜ì—­:", zoneId);
    }

    // ë“œë¡­í•˜ë©´ í•´ë‹¹ì˜ì—­ì— ëª¨ë“ˆ ì •ë³´ í‘œì‹œ
    scwin.displayModuleInArea(zoneId, draggedModuleId);
};

// ë“œë¡­ ì˜ì—­ ì²´í¬ í•¨ìˆ˜
scwin.checkDropZone = function(x, y) {
    console.log("ë“œë¡­ ìœ„ì¹˜ ì²´í¬:", x, y, "ëª¨ë“ˆ:", draggedModuleId);
    
    // ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì—ì„œ ì‹¤ì œ ìš”ì†Œ ì°¾ê¸°
    var elementAtPosition = document.elementFromPoint(x, y);
    
    if (!elementAtPosition) {
        console.log("ë“œë¡­ ì‹¤íŒ¨: ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ");
        return;
    }
    
    // ë””ë²„ê¹…: ì²« ë²ˆì§¸ ìš”ì†Œ ì •ë³´ ì¶œë ¥
    // console.log("ì²« ë²ˆì§¸ ê°ì§€ëœ ìš”ì†Œ:", {
    //     tagName: elementAtPosition.tagName,
    //     id: elementAtPosition.id,
    //     className: elementAtPosition.className
    
    // ë“œë¡­ ì˜ì—­ ì°¾ê¸° (ìƒìœ„ë¡œ ì˜¬ë¼ê°€ë©´ì„œ grp_areaë¡œ ì‹œì‘í•˜ëŠ” ìš”ì†Œ ì°¾ê¸°)
    var dropZoneElement = scwin.findDropZoneElement(elementAtPosition);
    
    if (dropZoneElement) {
        var zoneId = dropZoneElement.id;
        console.log("ë“œë¡­ ì„±ê³µ! ì˜ì—­:", zoneId);
        
        // ì˜ì—­ë³„ ì²˜ë¦¬
        scwin.handleDrop(zoneId);
    } else {
        console.log("ë“œë¡­ ì‹¤íŒ¨: ìœ íš¨í•œ ì˜ì—­ì´ ì•„ë‹˜");
    }
};

// ë“œë¡­ ì˜ì—­ ìš”ì†Œ ì°¾ê¸° í•¨ìˆ˜
scwin.findDropZoneElement = function(element) {
    // ì˜ì—­1~4ì˜ ID ëª©ë¡ - mf_ ì ‘ë‘ì‚¬ ì¶”ê°€
    var validDropZones = ["mf_grp_area1", "mf_grp_area2", "mf_grp_area3", "mf_grp_area4"];
    
    // í˜„ì¬ ìš”ì†Œë¶€í„° ìƒìœ„ë¡œ ì˜¬ë¼ê°€ë©´ì„œ ì²´í¬
    var currentElement = element;
    var stepCount = 0;
    
    //console.log("=== ë“œë¡­ ì˜ì—­ ì°¾ê¸° ì‹œì‘ ===");
    
    while (currentElement && currentElement !== document.body && stepCount < 10) {
        stepCount++;
        
        // console.log("ë‹¨ê³„ " + stepCount + ":", {
        //     tagName: currentElement.tagName,
        //     id: currentElement.id,
        //     className: currentElement.className
        // });
        
        // í˜„ì¬ ë“œë¡­í•œ ì˜ì—­ ìš”ì†Œì˜ IDê°€ ìœ íš¨í•œ ë“œë¡­ ì˜ì—­ì¸ì§€ ì²´í¬
        for (var i = 0; i < validDropZones.length; i++) {
            if (currentElement.id === validDropZones[i]) {
                console.log("ìœ íš¨ ë“œë¡­ ì˜ì—­ ë°œê²¬:", currentElement.id);
                return currentElement;
            }
        }
        
        // ìƒìœ„ ìš”ì†Œë¡œ ì´ë™
        currentElement = currentElement.parentElement;
    }
    
    console.log("=== ë“œë¡­ ì˜ì—­ ì°¾ê¸° ì‹¤íŒ¨ ===");
    return null; // -> ìœ íš¨í•œ ë“œë¡­ ì˜ì—­ì„ ì°¾ì§€ ëª»í•œ ê²½ìš°
};

]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload">
    	<xf:group class="sub_contents" id="" meta_snippetCategory="00_í™”ë©´ì‹œì‘" meta_snippetKeyComponent="true" meta_snippetName="0_01 í˜ì´ì§€ì‹œì‘"
    		style="">
    		<xf:group class="pgtbox" id="" meta_snippetCategory="02_íƒ€ì´í‹€" meta_snippetKeyComponent="true" meta_snippetName="2_01 í˜ì´ì§€íƒ€ì´í‹€"
    			style="width:100%;height:60px;background:#667eea;color:white;font-size:18px;text-align:center;">
    			<w2:textbox class="pgt_tit" id="tb_title" label="UI ë°°ì¹˜ ì„¤ì •" style="" tagname=""></w2:textbox>
    			<xf:group class="breadcrumb" id="" style="">
    				<xf:group id="" style="" tagname="ul">
    					<xf:group class="home" id="" style="" tagname="li">
    						<w2:anchor id="" outerDiv="false" style="">
    							<xf:label><![CDATA[Home]]></xf:label>
    						</w2:anchor>
    					</xf:group>
    					<xf:group id="" style="" tagname="li">
    						<w2:anchor id="" outerDiv="false" style="">
    							<xf:label><![CDATA[1Depth Menu]]></xf:label>
    						</w2:anchor>
    					</xf:group>
    					<xf:group id="" style="" tagname="li">
    						<w2:anchor id="" outerDiv="false" style="">
    							<xf:label><![CDATA[2Depth Menu]]></xf:label>
    						</w2:anchor>
    					</xf:group>
    					<xf:group id="" style="" tagname="li">
    						<w2:span id="" label="3Depth Menu" style=""></w2:span>
    					</xf:group>
    				</xf:group>
    			</xf:group>
    			<xf:trigger class="btn_fav" id="" style="" type="button">
    				<xf:label></xf:label>
    			</xf:trigger>
    		</xf:group>
    		<xf:group style="width:100%;height:171.20%;border:1px solid #ddd;" id="grp_main">
    			<xf:group style="width:350px;height:500px;background:#f8f9fa;padding:5px;float:left;" id="grp_sidebar">
    				<xf:group class="titbox" id="" meta_snippetCategory="02_íƒ€ì´í‹€" meta_snippetKeyComponent="true"
    					meta_snippetName="2_03 ì„œë¸Œíƒ€ì´í‹€(h4)" style="width:100%;font-weight:bold;margin-bottom:10px;">
    					<w2:textbox class="" id="" label="ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“ˆ" style="font-size: 20px" tagname="h4"></w2:textbox>
    				</xf:group>
    				<xf:group
    					style="width:90%;background:white;border:2px solid #4CAF50;border-radius:8px;padding:10px;margin:5px auto;cursor:pointer;"
    					id="grp_chatModule" ev:onmousedown="scwin.module_mouseDown" ev:onmousemove="scwin.global_mouseMove" ev:onmouseup="scwin.global_mouseUp">
    					<w2:span id="tb_chatIcon" label="ğŸ’¬" meta_snippetCategory="10_ì…ë ¥í¼" meta_snippetKeyComponent="true"
    						meta_snippetName="10_16 ì¶œë ¥í…ìŠ¤íŠ¸" style="width:100%;text-align:center;font-size:24px;margin-bottom:8px;display:block;">
    					</w2:span>
    					<w2:span id="tb_chatName" label="ì±„íŒ…" meta_snippetCategory="10_ì…ë ¥í¼" meta_snippetKeyComponent="true"
    						meta_snippetName="10_16 ì¶œë ¥í…ìŠ¤íŠ¸" style="width:100%;text-align:center;font-weight:bold;margin-bottom:4px;display:block;">
    					</w2:span>
    					<w2:span id="tb_chatDesc" label="ì‹¤ì‹œê°„ ë©”ì‹œì§•" meta_snippetCategory="10_ì…ë ¥í¼" meta_snippetKeyComponent="true"
    						meta_snippetName="10_16 ì¶œë ¥í…ìŠ¤íŠ¸" style="width:100%;text-align:center;font-size:12px;color:#666;display:block;">
    					</w2:span>
    				</xf:group>
    				<xf:group
    					style="width:90%;background:white;border:2px solid #4CAF50;border-radius:8px;padding:10px;margin:5px auto;cursor:pointer;"
    					id="grp_videoModule" ev:onmousedown="scwin.module_mouseDown" ev:onmousemove="scwin.global_mouseMove" ev:onmouseup="scwin.global_mouseUp">
    					<w2:span id="tb_videoIcon" label="ğŸ“¹" meta_snippetCategory="10_ì…ë ¥í¼" meta_snippetKeyComponent="true"
    						meta_snippetName="10_16 ì¶œë ¥í…ìŠ¤íŠ¸" style="width:100%;text-align:center;font-size:24px;margin-bottom:8px;display:block;">
    					</w2:span>
    					<w2:span id="tb_videoName" label="í™”ìƒíšŒì˜" meta_snippetCategory="10_ì…ë ¥í¼" meta_snippetKeyComponent="true"
    						meta_snippetName="10_16 ì¶œë ¥í…ìŠ¤íŠ¸" style="width:100%;text-align:center;font-weight:bold;margin-bottom:4px;display:block;">
    					</w2:span>
    					<w2:span id="tb_videoDesc" label="WebRTC ì˜ìƒí†µí™”" meta_snippetCategory="10_ì…ë ¥í¼" meta_snippetKeyComponent="true"
    						meta_snippetName="10_16 ì¶œë ¥í…ìŠ¤íŠ¸" style="width:100%;text-align:center;font-size:12px;color:#666;display:block;">
    					</w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group style="width:NaN%;height:261.60%;background:#f0f2f5;padding:20px;margin-left:350px;" id="grp_canvasContainer">
    				<xf:group class="titbox" id="" meta_snippetCategory="02_íƒ€ì´í‹€" meta_snippetKeyComponent="true"
    					meta_snippetName="2_03 ì„œë¸Œíƒ€ì´í‹€(h4)" style="">
    					<w2:textbox class="" id="" label="UI ë°°ì¹˜í™”ë©´" style="" tagname="h4"></w2:textbox>
    				</xf:group>
    				<xf:group
    					style="width:100%;height:100%;padding:20px;display:flex;flex-wrap:wrap;justify-content:space-around;align-content:flex-start;"
    					id="">
    					<xf:group
    						style="width:45%;height:150px;background:white;border:2px dashed #ddd;border-radius:8px;margin:2%;display:flex;align-items:center;justify-content:center;cursor:pointer;"
    						id="grp_area1">
    						<w2:span id="tb_area1Label" label="ì˜ì—­ 1" meta_snippetCategory="10_ì…ë ¥í¼" meta_snippetKeyComponent="true"
    							meta_snippetName="10_16 ì¶œë ¥í…ìŠ¤íŠ¸" style="color:#999;text-align:center;font-size:14px;">
    						</w2:span>
    					</xf:group>
    					<xf:group
    						style="width:45%;height:150px;background:white;border:2px dashed #ddd;border-radius:8px;margin:2%;display:flex;align-items:center;justify-content:center;cursor:pointer;"
    						id="grp_area2">
    						<w2:span id="tb_area2Label" label="ì˜ì—­ 2" meta_snippetCategory="10_ì…ë ¥í¼" meta_snippetKeyComponent="true"
    							meta_snippetName="10_16 ì¶œë ¥í…ìŠ¤íŠ¸" style="color:#999;text-align:center;font-size:14px;">
    						</w2:span>
    					</xf:group>
    					<xf:group
    						style="width:45%;height:150px;background:white;border:2px dashed #ddd;border-radius:8px;margin:2%;display:flex;align-items:center;justify-content:center;cursor:pointer;"
    						id="grp_area3">
    						<w2:span id="tb_area3Label" label="ì˜ì—­ 3" meta_snippetCategory="10_ì…ë ¥í¼" meta_snippetKeyComponent="true"
    							meta_snippetName="10_16 ì¶œë ¥í…ìŠ¤íŠ¸" style="color:#999;text-align:center;font-size:14px;">
    						</w2:span>
    					</xf:group>
    					<xf:group
    						style="width:45%;height:150px;background:white;border:2px dashed #ddd;border-radius:8px;margin:2%;display:flex;align-items:center;justify-content:center;cursor:pointer;"
    						id="grp_area4">
    						<w2:span id="tb_area4Label" label="ì˜ì—­ 4" meta_snippetCategory="10_ì…ë ¥í¼" meta_snippetKeyComponent="true"
    							meta_snippetName="10_16 ì¶œë ¥í…ìŠ¤íŠ¸" style="color:#999;text-align:center;font-size:14px;">
    						</w2:span>
    					</xf:group>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    	</xf:group>
    </body>
</html>
